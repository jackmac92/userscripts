// ==UserScript==
// @name         Jack's Dev Helpers
// @version      0.1.0
// @description  Hodgepodge of dev utils
// @author       Jack McCown
// @match        *://*/*
// @namespace    jackmscripts
// @run-at       document-end
// ==/UserScript==
!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=1)}([,function(e,n,t){"use strict";t.r(n);var r={};t.r(r),t.d(r,"ALWAYS",(function(){return f})),t.d(r,"NEVER",(function(){return p})),t.d(r,"DOMCONTENTLOADED",(function(){return h})),t.d(r,"LOAD",(function(){return m}));var o={};t.r(o),t.d(o,"explanation",(function(){return v})),t.d(o,"failureDescriber",(function(){return b}));var i={};t.r(i),t.d(i,"setPrefix",(function(){return j})),t.d(i,"setLogger",(function(){return O})),t.d(i,"log",(function(){return T})),t.d(i,"info",(function(){return k})),t.d(i,"warning",(function(){return A})),t.d(i,"error",(function(){return E}));var a={};function c(e){return function(n){return e(n)}}function u(e,n){return function(t){return e(n(t))}}function s(e,n,t){return function(r){return e(n(t(r)))}}function l(e,n,t,r){return function(o){return e(n(t(r(o))))}}function d(e,n,t,r,o){return function(i){return e(n(t(r(o(i)))))}}t.r(a),t.d(a,"run",(function(){return P}));const f=()=>!0,p=()=>!1,h=e=>"loading"!==e,m=e=>"complete"===e;function g(e){return e.map(e=>e+"\n").join("")}function y(e){return"  "+e.key+": "+e.selector}function v(e){switch(e.result.reason){case 0:return g(["These dependencies were not found:","",g(e.result.dependencies.map(y))]);case 1:return g(["The operation failed with this error:","",e.result.message])}}function b(e){return n=>g([`Could not ${n.operation.description} on this page:`,"","  "+location.href,"",v(n).trim(),"",`This problem might be caused by ${e.siteName} changing its content/structure, in which case ${e.extensionName} needs to be updated accordingly. Otherwise, it's probably a bug in ${e.extensionName}.`,"","If you file a bug report, please include this message."])}let w="",x=console;function j(e){w=e}function O(e){x=e}function T(e){x.log(w,e)}function k(e){x.info(w,e)}function A(e){x.warn(w,e)}function E(e){x.error(w,e)}function S(e){return"number"==typeof e}function N(e){return"string"==typeof e}function $(e){return null===e}function D(e){const n=void 0===e.dependencies?{}:e.dependencies,t=Object.entries(n).map(([e,n])=>({key:e,selector:n,element:document.querySelector(n)})),r=t.filter(e=>$(e.element));if(r.length>0)return{reason:0,dependencies:r};const o=t.reduce((e,n)=>Object.defineProperty(e,n.key,{value:n.element}),{});return N(i=e.action(o))?{reason:1,message:i}:void 0;var i}const L=e=>n=>{const t=document.getElementById(n.id);null!==t&&t.setAttribute("media",e)};L("all"),L("not all");function P(e){j(`[${e.name}]`);const n="data-"+e.id+"-has-run";var t;document.documentElement.hasAttribute(n)?A(`It looks as though ${e.name} has already run (because the attribute "${n}" was found on <head>). Stopping.`):(document.documentElement.setAttribute(n,""),e.initialAction(),function(e){const n=document.createDocumentFragment();Object.entries(e).forEach(([e,t])=>{const r=document.createElement("style");void 0!==t.id&&(r.id=t.id),r.textContent=t.css,r.media=t.condition(window)?"all":"not all",n.appendChild(r)}),document.documentElement.appendChild(n)}(e.stylesheets),function e(n,r,o){const i=S(o)&&o<=0,a=[],c=[],u=document.readyState;for(const e of n)(void 0===e.deferUntil||e.deferUntil(u)?a:c).push(e);for(const e of a){const n=D(e);if(void 0!==n)switch(n.reason){case 0:i?r.push({result:n,operation:e}):c.push(e);break;case 1:r.push({result:n,operation:e})}}c.length>0?setTimeout(()=>e(c,r,S(o)?o-1:t.tryUntil(u)?t.extraTries:void 0),t.interval):r.length>0&&t.handleFailures(r)}((t=e.operationsPlan).operations.filter(e=>e.condition(window)),[]))}const C=Array.from,M=e=>{const n=e.cloneNode(!0);return C(n.querySelectorAll("a")).forEach(e=>e.innerText=`[${e.innerText}](${e.href})`),n.innerText.trim()};var q=[{description:"Insert a copy tooltip on tables",condition:f,action:()=>{var e,n,t;e=document.querySelectorAll("table"),n=(e,n)=>{const t=function(e){let n=[];return n=null!==e.tHead?C(e.tHead.querySelectorAll("th")).map(e=>M(e)):C(e.querySelectorAll("th")).map(e=>M(e)),C(e.tBodies).flatMap(e=>C(e.querySelectorAll("tr")).map(e=>{const t=C(e.querySelectorAll("td")).map(e=>M(e));return t.length!==n.length&&console.warn("Found a row with a mismatch"),0===n.length?t:n.reduce((e,n,r)=>({...e,[n]:t[r]}),{})}))}(e);var r;r=JSON.stringify(t,null,4),navigator.permissions.query({name:"clipboard-write"}).then(e=>{if("granted"==e.state||"prompt"==e.state)return navigator.clipboard.writeText(r).then(()=>{});throw Error("Permission for clipboard-write was not obtained "+e.state)})},t=e=>{e.innerText="Copy"},Array.from(e).map(e=>{e.classList.add("jacks-dev-helpers-interact-target"),e.innerHTML=`<span class="jacks-dev-helpers-outer-wrap" >${e.innerHTML}</span>`;const r=document.createElement("span");return r.classList.add("jacks-dev-helpers-interact-widget"),r.addEventListener("click",t=>{const r=e.cloneNode(!0),o=r.children;for(let e=0;e<o.length;e++){const n=o[e];n.classList.contains("jacks-dev-helpers-interact-widget")&&r.removeChild(n)}n(r,t)}),t(r),e.appendChild(r),r})}}],_="jacks-dev-helpers",H="Jack's Dev Helpers",F="0.1.0";const I="google.com",U={general:{condition:f,css:"\n            .jacks-dev-helpers-interact-widget {\n              display: none;\n              top: 0px;\n              right: 0px;\n              padding: 5px 10px;\n              cursor: grab;\n              background: unset;\n              align-self: flex-end;\n            }\n            .jacks-dev-helper-outer-wrap {\n              display: flex\n            }\n            .jacks-dev-helpers-interact-target:hover > .jacks-dev-helpers-interact-widget {\n              display: inline-flex;\n            }\n            .jacks-dev-helpers-interact-widget:hover {\n              text-decoration: underline;\n            }\n             "}};var B=U;const J=o.failureDescriber({siteName:I,extensionName:H,location:document.location});a.run({id:_,name:H,initialAction:()=>i.log(`${H} ${F}`),stylesheets:B,operationsPlan:{operations:q,interval:200,tryUntil:r.DOMCONTENTLOADED,extraTries:3,handleFailures:e=>e.forEach(function(){switch(arguments.length){case 1:return c(arguments[0]);case 2:return u(arguments[0],arguments[1]);case 3:return s(arguments[0],arguments[1],arguments[2]);case 4:return l(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return d(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4])}}(i.error,J))}})}]);